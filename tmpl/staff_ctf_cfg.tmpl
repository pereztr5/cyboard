{{ define "content" }}
{{ template "staff-ctf-table" . }}
<hr/>
{{ template "staff-ctf-csv-upload" . }}

{{ template "bs-ctf-config-markdown-modal" }}
{{ end }}

{{ define "staff-ctf-table" }}
<h5>All Challenges</h5>
<div class="guidelines">
  {{/*
  <h4>Challenge Editing Guidelines:</h4>
  <ul>
  </ul>
  */}}
</div>
<div class="ctf-controls">
  <!-- TODO: Inputs for sorting, filtering, etc. -->
</div>
<div class="table-responsive">
  <table class="table table-striped table-hover flag-config-table config-table">
    <thead><tr>
      <th>ID</th>
      <th>Name</th>
      <th>Category</th>
      <th>Designer</th>
      <th>Points</th>
      <th>Hidden?</th>
      <th>Modified</th>
      <th>Flag/Body/Files/Edit/Delete</th>
    </tr></thead>
    <tbody>
      {{ range .Data.Challenges }}
      <tr data-flag-id='{{ .ID }}'>
        <td>{{.ID}}</td>
        <td>{{.Name}}</td>
        <td>{{.Category}}</td>
        <td>{{.Designer}}</td>
        <td>{{.Total}}</td>
        <td>{{.Hidden}}</td>
        <td>{{ timestamp .ModifiedAt }}</td>
        <th><div class="btn-group btn-group-sm">
          <button type="button" class="btn btn-default" data-flag='{{.Flag}}'><i class="fa fa-flag"></i></button>
          <button {{/* type="button" */}}class="btn btn-success" data-target="#bs-ctf-config-markdown-modal">
            <i class="fa fa-sticky-note-o"></i>
          </button>
          <button class="btn btn-primary"><i class="fa fa-files-o"></i></button>
          <button type="button" class="btn btn-warning"><i class="fa fa-pencil"></i></button>
          <button type="button" class="btn btn-danger"><i class="fa fa-trash"></i></button>
        </div></th>
      </tr>
      {{ end }}
    </tbody>
  </table>
</div>
{{ end }}

{{ define "staff-ctf-csv-upload" }}
<div class="csv-upload flag-config-csv-upload form-group">
  <div class="guidelines">
    <h4>Add Flags via CSV</h4>
    <ul>
      <li>The header line is ignored. Columns must be in the order
        shown in the placeholder text.</li>
      <li>All leading spaces are trimmed, unless quotes ("") are used.</li>
    </ul>
  </div>
  <form>
    <textarea class="form-control" rows="10"></textarea>
    <div class="row">
      <div class="col-md-10 status-region">
        <span class="status"></span>
      </div>
      <div class="col-md-2">
        <button class="btn btn-default" type="submit">
          <i class="fa fa-upload" aria-hidden="true"></i> Submit
        </button>
      </div>
    </div>
  </form>
</div>
{{end}}

{{ define "bs-ctf-config-markdown-modal" }}
<div class="modal fade" id="ctf-config-markdown-modal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content text-center">
      <div class="modal-body">
        <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
        <div class="row">
          <div class="col-md-6 col-sm-12">
            <textarea></textarea>
          </div>
          <div class="col-md-6 col-sm-12">
            <div class="preview text-center"></div>
          </div>
        </div>
        <div class="btn-group">
          <button type="button" class="btn btn-default">Cancel</button>
          <button type="submit" class="btn btn-primary">Update</button>
        </div>
    </div>
  </div>
</div>
{{ end }}

{{ define "styles" }}
  <link rel="stylesheet" href="/assets/css/staff/ctf.css">
{{ end }}

{{ define "scripts" }}
  <script src="/assets/js/staff/ctf.js"></script>
{{ end }}
